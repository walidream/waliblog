I"WŞ<p>æœ€è¿‘åœ¨é¡¹ç›®ä¸­ç”¨åˆ°canvasç»˜å›¾ï¼Œæœ‰ç‚¹å¿ƒå¾—ï¼Œåœ¨æ­¤å°è®°ã€‚</p>

<p>åŸæœ¬æ‰“ç®—ç”¨ç™¾åº¦<code class="language-plaintext highlighter-rouge">echarts</code>ï¼Œç™¾åº¦echartsæœ‰é¥¼çŠ¶å›¾ï¼Œä½†åæ¥æ²¡æœ‰ç”¨ã€‚ä¸»è¦æœ‰ä¸¤æ–¹é¢åŸå› ã€‚</p>

<blockquote>
  <p>1.å°èœçš„æŠ€æœ¯æœ‰é™ï¼Œä¸èƒ½ç›´æ¥æ‹¿æ¥ç”¨ã€‚</p>
</blockquote>

<blockquote>
  <p>2.å¦‚æœè¦ç”¨echartsé‚£å°±å¾—ç†Ÿè¯»echartsçš„apiæ–‡æ¡£ï¼Œå°èœæ—¶é—´æœ‰é™ã€‚</p>
</blockquote>

<p>æŒ‰ç…§å°èœçš„å°¿æ€§ï¼Œå…ˆæŠŠdemoæ”¾å‡ºæ¥</p>

<script async="" src="//jsrun.net/IUhKp/embed/all/light/"></script>

<blockquote>
  <p>å¤‡ç”¨æ¼”ç¤ºåœ°å€<a href="http://walidream.com/example/canvas/pieChart/" title="http://walidream.com/example/canvas/pieChart/" target="_blank">http://walidream.com/example/canvas/pieChart/</a></p>
</blockquote>

<h1 id="1ç»˜å®çº¿åœ†">1.ç»˜å®çº¿åœ†</h1>

<blockquote>
  <p>æ–¹æ³•ï¼š<code class="language-plaintext highlighter-rouge">drawSolidRound(ctx,x,y,round)</code></p>
</blockquote>

<blockquote>
  <p>å‚æ•°ï¼š<code class="language-plaintext highlighter-rouge">ctx</code> <code class="language-plaintext highlighter-rouge">x</code> <code class="language-plaintext highlighter-rouge">y</code> <code class="language-plaintext highlighter-rouge">round</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>ç±»å‹</th>
      <th>å¿…å¡«</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ctx</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>canvas 2dç»˜å›¾ç¯å¢ƒ</td>
    </tr>
    <tr>
      <td>x</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ†å¿ƒxåæ ‡</td>
    </tr>
    <tr>
      <td>y</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ†å¿ƒyåæ ‡</td>
    </tr>
    <tr>
      <td>round</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>åœ†çš„åŸºæœ¬å‚æ•°</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>å‚æ•°ï¼š<code class="language-plaintext highlighter-rouge">round</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>ç±»å‹</th>
      <th>å¿…å¡«</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>starAngle</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>èµ·å§‹è§’åº¦</td>
    </tr>
    <tr>
      <td>endAngle</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>ç»“æŸè§’åº¦</td>
    </tr>
    <tr>
      <td>anticlockwise</td>
      <td>Boolean</td>
      <td>æ˜¯</td>
      <td>true(é¡ºæ—¶é’ˆ),false(é€†æ—¶é’ˆ)</td>
    </tr>
    <tr>
      <td>radius</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ†åŠå¾„</td>
    </tr>
    <tr>
      <td>border</td>
      <td>Array</td>
      <td>æ˜¯</td>
      <td>[0]:æ˜¯çº¿æ¡å®½åº¦å€¼,[1]:çº¿æ¡é¢œè‰²å€¼</td>
    </tr>
    <tr>
      <td>bgColor</td>
      <td>String</td>
      <td>æ˜¯</td>
      <td>èƒŒæ™¯è‰²</td>
    </tr>
  </tbody>
</table>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">drawSolidRound</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">round</span><span class="p">){</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">()</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">round</span><span class="p">.</span><span class="nx">border</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>   
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">round</span><span class="p">.</span><span class="nx">border</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> 
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">round</span><span class="p">.</span><span class="nx">radius</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">getRads</span><span class="p">(</span><span class="nx">round</span><span class="p">.</span><span class="nx">starAngle</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">getRads</span><span class="p">(</span><span class="nx">round</span><span class="p">.</span><span class="nx">endAngle</span><span class="p">),</span><span class="nx">round</span><span class="p">.</span><span class="nx">anticlockwise</span><span class="p">);</span> 
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">round</span><span class="p">.</span><span class="nx">bgColor</span><span class="p">;</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
<span class="p">}</span>

</code></pre></div></div>

<h1 id="2ç»˜è™šçº¿åœ†">2.ç»˜è™šçº¿åœ†</h1>

<blockquote>
  <p>æ–¹æ³•ï¼š<code class="language-plaintext highlighter-rouge">drawDashRound (ctx, x, y, dashround)</code></p>
</blockquote>

<blockquote>
  <p>å‚æ•°ï¼š<code class="language-plaintext highlighter-rouge">ctx</code> <code class="language-plaintext highlighter-rouge">x</code> <code class="language-plaintext highlighter-rouge">y</code> <code class="language-plaintext highlighter-rouge">dashround</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>ç±»å‹</th>
      <th>å¿…å¡«</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ctx</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>canvas 2dç»˜å›¾ç¯å¢ƒ</td>
    </tr>
    <tr>
      <td>x</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ†å¿ƒxåæ ‡</td>
    </tr>
    <tr>
      <td>y</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ†å¿ƒyåæ ‡</td>
    </tr>
    <tr>
      <td>dashround</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>åŸºæœ¬å‚æ•°</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>å‚æ•°ï¼š<code class="language-plaintext highlighter-rouge">dashround</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>ç±»å‹</th>
      <th>å¿…å¡«</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>step</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>è™šçº¿é—´è·(å€¼è¶Šå¤§ï¼Œé—´è·è¶Šå¤§)</td>
    </tr>
    <tr>
      <td>starAngle</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>èµ·å§‹è§’åº¦</td>
    </tr>
    <tr>
      <td>endAngle</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>ç»“æŸè§’åº¦</td>
    </tr>
    <tr>
      <td>anticlockwise</td>
      <td>Boolean</td>
      <td>æ˜¯</td>
      <td>true(é¡ºæ—¶é’ˆ),false(é€†æ—¶é’ˆ)</td>
    </tr>
    <tr>
      <td>radius</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ†åŠå¾„</td>
    </tr>
    <tr>
      <td>border</td>
      <td>Array</td>
      <td>æ˜¯</td>
      <td>[0]:çº¿æ¡å®½åº¦,[1]:çº¿æ¡é¢œè‰²å€¼</td>
    </tr>
    <tr>
      <td>bgColor</td>
      <td>String</td>
      <td>æ˜¯</td>
      <td>èƒŒæ™¯è‰²</td>
    </tr>
    <tr>
      <td>innerBorder</td>
      <td>Array</td>
      <td>[0]:å†…ç¯çº¿æ¡å®½åº¦,[1]:å†…ç¯çº¿æ¡é¢œè‰²å€¼</td>
      <td>Â </td>
    </tr>
    <tr>
      <td>innerBgColor</td>
      <td>String</td>
      <td>æ˜¯</td>
      <td>å†…ç¯èƒŒæ™¯è‰²</td>
    </tr>
  </tbody>
</table>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">drawDashRound</span> <span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">dashround</span><span class="p">){</span>    
     <span class="kd">let</span> <span class="nx">step</span> <span class="o">=</span> <span class="nx">dashround</span><span class="p">.</span><span class="nx">step</span> <span class="o">/</span> <span class="mi">180</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">;</span>
     <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">step</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span> <span class="nx">e</span> <span class="o">&lt;=</span> <span class="nx">dashround</span><span class="p">.</span><span class="nx">endAngle</span><span class="p">;</span> <span class="nx">b</span> <span class="o">+=</span> <span class="nx">step</span><span class="p">,</span> <span class="nx">e</span> <span class="o">+=</span> <span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
       <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">()</span>
       <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">dashround</span><span class="p">.</span><span class="nx">border</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
       <span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">dashround</span><span class="p">.</span><span class="nx">border</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
       <span class="nx">ctx</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
       <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">dashround</span><span class="p">.</span><span class="nx">radius</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
       <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
     <span class="p">}</span>
     <span class="c1">//å¡«å……å†…åœˆ</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">()</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">dashround</span><span class="p">.</span><span class="nx">innerBorder</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span><span class="o">=</span> <span class="nx">dashround</span><span class="p">.</span><span class="nx">innerBorder</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">dashround</span><span class="p">.</span><span class="nx">radius</span> <span class="o">-</span> <span class="nx">dashround</span><span class="p">.</span><span class="nx">border</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="k">this</span><span class="p">.</span><span class="nx">getRads</span><span class="p">(</span><span class="nx">dashround</span><span class="p">.</span><span class="nx">starAngle</span><span class="p">),</span> <span class="k">this</span><span class="p">.</span><span class="nx">getRads</span><span class="p">(</span><span class="nx">dashround</span><span class="p">.</span><span class="nx">endAngle</span><span class="p">));</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span><span class="o">=</span> <span class="nx">dashround</span><span class="p">.</span><span class="nx">innerBgColor</span><span class="p">;</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
	 
<span class="p">}</span>

</code></pre></div></div>

<h1 id="3ç”»ç­‰ä»½çº¿">3.ç”»ç­‰ä»½çº¿</h1>

<blockquote>
  <p>æ–¹æ³•ï¼š<code class="language-plaintext highlighter-rouge">drawAngleSolid(ctx,x,y,line)</code></p>
</blockquote>

<blockquote>
  <p>å‚æ•°ï¼š<code class="language-plaintext highlighter-rouge">ctx</code> <code class="language-plaintext highlighter-rouge">x</code> <code class="language-plaintext highlighter-rouge">y</code> <code class="language-plaintext highlighter-rouge">line</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>ç±»å‹</th>
      <th>å¿…å¡«</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ctx</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>canvas 2dç»˜å›¾ç¯å¢ƒ</td>
    </tr>
    <tr>
      <td>x</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ†å¿ƒxåæ ‡</td>
    </tr>
    <tr>
      <td>y</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ†å¿ƒyåæ ‡</td>
    </tr>
    <tr>
      <td>line</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>åŸºæœ¬å‚æ•°</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>å‚æ•°ï¼š<code class="language-plaintext highlighter-rouge">line</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>ç±»å‹</th>
      <th>å¿…å¡«</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>width</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>çº¿æ¡é•¿åº¦</td>
    </tr>
    <tr>
      <td>border</td>
      <td>Array</td>
      <td>æ˜¯</td>
      <td>[0]:æ˜¯çº¿æ¡å®½åº¦å€¼,[1]:çº¿æ¡é¢œè‰²å€¼</td>
    </tr>
  </tbody>
</table>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">drawAngleSolid</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">line</span><span class="p">){</span>
     <span class="kd">let</span> <span class="nx">s</span> <span class="o">=</span> <span class="p">{</span>
     	<span class="na">x</span><span class="p">:</span><span class="nx">x</span><span class="p">,</span>
     	<span class="na">y</span><span class="p">:</span><span class="nx">y</span><span class="p">,</span>
     	<span class="na">r</span><span class="p">:</span><span class="nx">line</span><span class="p">.</span><span class="nx">width</span>
     <span class="p">}</span>
     <span class="kd">let</span> <span class="nx">num</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">allTagValues</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>   <span class="c1">//è·å–ç­‰ä»½</span>
     <span class="kd">let</span> <span class="nx">sang</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getsolidPointAngle</span><span class="p">(</span><span class="nx">num</span><span class="p">);</span>   <span class="c1">//è·å–ç­‰ä»½è§’åº¦	</span>
     <span class="kd">let</span> <span class="nx">spoint</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getCircle</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">sang</span><span class="p">);</span>		<span class="c1">//è·å–ç­‰ä»½è§’åº¦ç‚¹åæ ‡		</span>
     
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">border</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
     <span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">border</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
     
     <span class="kd">let</span> <span class="nx">nleng</span> <span class="o">=</span> <span class="nx">spoint</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
     <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">spoint</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
     	<span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
     	<span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">spoint</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span><span class="p">,</span><span class="nx">spoint</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span><span class="p">);</span>
     	<span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">spoint</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="nx">nleng</span><span class="p">].</span><span class="nx">x</span><span class="p">,</span><span class="nx">spoint</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="nx">nleng</span><span class="p">].</span><span class="nx">y</span><span class="p">);</span>
     	<span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
     	<span class="nx">ctx</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
     <span class="p">}</span>
	
<span class="p">}</span>
</code></pre></div></div>

<h1 id="4ç”»å¤šå¼§">4.ç”»å¤šå¼§</h1>

<blockquote>
  <p>æ–¹æ³•ï¼š<code class="language-plaintext highlighter-rouge">drawMoreScreen(ctx)</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>ç±»å‹</th>
      <th>å¿…å¡«</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ctx</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>canvas 2dç»˜å›¾ç¯å¢ƒ</td>
    </tr>
  </tbody>
</table>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">drawMoreScreen</span><span class="p">(</span><span class="nx">ctx</span><span class="p">){</span>
    <span class="kd">let</span> <span class="nb">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">screenArr</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">tagValueUUIDs</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">allScreenArr</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">allTagValusUUIDs</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">angle</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">/</span> <span class="nx">allScreenArr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">angleArr</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getsolidPointAngle</span><span class="p">(</span><span class="nx">allScreenArr</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nx">tmpArr</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">screenArr</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span> <span class="nx">val</span> <span class="o">=&gt;</span> <span class="p">{</span>
    	<span class="kd">let</span> <span class="nx">tmpobj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">isArrayValue</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span><span class="nx">allScreenArr</span><span class="p">);</span>
    	<span class="k">if</span><span class="p">(</span><span class="nx">tmpobj</span><span class="p">.</span><span class="nx">flag</span><span class="p">){</span>
    		<span class="kd">let</span> <span class="nx">ang</span> <span class="o">=</span> <span class="nx">angleArr</span><span class="p">[</span><span class="nx">tmpobj</span><span class="p">.</span><span class="nx">ind</span><span class="p">];</span>
    		<span class="nx">tmpArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">ang</span><span class="p">);</span>
    	<span class="p">}</span>
    <span class="p">});</span>				
    <span class="nx">tmpArr</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span> <span class="nx">val</span> <span class="o">=&gt;</span><span class="p">{</span>
    	<span class="nb">self</span><span class="p">.</span><span class="nx">drawScreen</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">activeStyle</span><span class="p">.</span><span class="nx">screen</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">getRads</span><span class="p">(</span><span class="nx">val</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">getRads</span><span class="p">(</span><span class="nx">val</span><span class="o">+</span><span class="nx">angle</span><span class="p">));</span>
    <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="5ç”»å•å¼§">5.ç”»å•å¼§</h1>

<blockquote>
  <p>æ–¹æ³•ï¼šdrawScreen (ctx,canvasWidth,canvasHeight,screen,sDeg,eDeg)</p>
</blockquote>

<blockquote>
  <p>å‚æ•°ï¼š<code class="language-plaintext highlighter-rouge">ctx</code> <code class="language-plaintext highlighter-rouge">canvasWidth</code> <code class="language-plaintext highlighter-rouge">canvasHeight</code> <code class="language-plaintext highlighter-rouge">screen</code> <code class="language-plaintext highlighter-rouge">sDeg</code> <code class="language-plaintext highlighter-rouge">eDeg</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>ç±»å‹</th>
      <th>å¿…å¡«</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ctx</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>canvas 2dç»˜å›¾ç¯å¢ƒ</td>
    </tr>
    <tr>
      <td>canvasWidth</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>ç”»å¸ƒå®½åº¦</td>
    </tr>
    <tr>
      <td>canvasHeight</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>ç”»å¸ƒé«˜åº¦</td>
    </tr>
    <tr>
      <td>screen</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>åŸºæœ¬å‚æ•°</td>
    </tr>
    <tr>
      <td>sDeg</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>èµ·å§‹å¼§åº¦</td>
    </tr>
    <tr>
      <td>eDeg</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>ç»“æŸå¼§åº¦</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>å‚æ•°ï¼š<code class="language-plaintext highlighter-rouge">screen</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>ç±»å‹</th>
      <th>å¿…å¡«</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>radius</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ†åŠå¾„</td>
    </tr>
    <tr>
      <td>border</td>
      <td>Array</td>
      <td>æ˜¯</td>
      <td>[0]:å¼§å®½åº¦,[1]:å¼§é¢œè‰²å€¼</td>
    </tr>
    <tr>
      <td>bgColor</td>
      <td>String</td>
      <td>æ˜¯</td>
      <td>èƒŒæ™¯è‰²</td>
    </tr>
  </tbody>
</table>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">drawScreen</span> <span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="nx">canvasWidth</span><span class="p">,</span><span class="nx">canvasHeight</span><span class="p">,</span><span class="nx">screen</span><span class="p">,</span><span class="nx">sDeg</span><span class="p">,</span><span class="nx">eDeg</span><span class="p">)</span> <span class="p">{</span> 
<span class="kd">let</span> <span class="nx">arc</span> <span class="o">=</span> <span class="p">{</span> 
        <span class="na">x</span><span class="p">:</span> <span class="nx">canvasWidth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
    	<span class="na">y</span><span class="p">:</span> <span class="nx">canvasHeight</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
    	<span class="na">r</span><span class="p">:</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">radius</span> 
    <span class="p">},</span> 
    <span class="nx">w</span> <span class="o">=</span> <span class="nx">canvasWidth</span><span class="p">,</span> 
    <span class="nx">h</span> <span class="o">=</span> <span class="nx">canvasHeight</span><span class="p">;</span> 
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span> 
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">border</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> 	
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">border</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>			
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">bgColor</span><span class="p">;</span> 
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span> <span class="c1">// èµ·å§‹ç‚¹è®¾ç½®åœ¨åœ†å¿ƒå¤„ </span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">arc</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">arc</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">arc</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">arc</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">arc</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span><span class="nx">sDeg</span><span class="p">,</span><span class="nx">eDeg</span><span class="p">);</span> <span class="c1">// é—­åˆè·¯å¾„</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>
<h1 id="6ç”»å°åœˆåœˆ">6.ç”»å°åœˆåœˆ</h1>

<blockquote>
  <p>æ–¹æ³•ï¼šdrawSmallCircle(ctx,x,y,smallRound)</p>
</blockquote>

<blockquote>
  <p>å‚æ•°ï¼š<code class="language-plaintext highlighter-rouge">ctx</code> <code class="language-plaintext highlighter-rouge">x</code> <code class="language-plaintext highlighter-rouge">y</code> <code class="language-plaintext highlighter-rouge">smallRound</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>ç±»å‹</th>
      <th>å¿…å¡«</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ctx</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>canvas 2dç»˜å›¾ç¯å¢ƒ</td>
    </tr>
    <tr>
      <td>x</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ†å¿ƒxåæ ‡</td>
    </tr>
    <tr>
      <td>y</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ†å¿ƒyåæ ‡</td>
    </tr>
    <tr>
      <td>smallRound</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>åŸºæœ¬å‚æ•°</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>å‚æ•°ï¼š<code class="language-plaintext highlighter-rouge">smallRound</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>ç±»å‹</th>
      <th>å¿…å¡«</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>starAngle</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>èµ·å§‹è§’åº¦</td>
    </tr>
    <tr>
      <td>endAngle</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>ç»“æŸè§’åº¦</td>
    </tr>
    <tr>
      <td>radius</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ†åŠå¾„</td>
    </tr>
    <tr>
      <td>fatherRadius</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>ä½äºçˆ¶åœ†ä¸Šçš„åŠå¾„</td>
    </tr>
    <tr>
      <td>border</td>
      <td>Arrray</td>
      <td>æ˜¯</td>
      <td>[0]:çº¿æ¡å®½åº¦,[1]:çº¿æ¡é¢œè‰²å€¼</td>
    </tr>
    <tr>
      <td>noBorder</td>
      <td>Array</td>
      <td>æ˜¯</td>
      <td>[0]:æœªè¢«é€‰ä¸­çº¿æ¡å®½åº¦,[1]:æœªè¢«é€‰ä¸­çº¿æ¡é¢œè‰²å€¼</td>
    </tr>
    <tr>
      <td>bgColor</td>
      <td>String</td>
      <td>æ˜¯</td>
      <td>èƒŒæ™¯è‰²</td>
    </tr>
  </tbody>
</table>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">drawSmallCircle</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">smallRound</span><span class="p">){</span>
    <span class="kd">let</span> <span class="nb">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">c</span> <span class="o">=</span><span class="p">{</span>
    	<span class="na">x</span><span class="p">:</span><span class="nx">x</span><span class="p">,</span>
    	<span class="na">y</span><span class="p">:</span><span class="nx">y</span><span class="p">,</span>
    	<span class="na">r</span><span class="p">:</span><span class="nx">smallRound</span><span class="p">.</span><span class="nx">fatherRadius</span>
    <span class="p">}</span>
    <span class="kd">let</span> <span class="nx">num</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">allTagValues</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="c1">//è·å–ç­‰åˆ†</span>
    <span class="kd">let</span> <span class="nx">angles</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getAngles</span><span class="p">(</span><span class="nx">num</span><span class="p">);</span>	
    <span class="kd">let</span> <span class="nx">quan</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getCircle</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">angles</span><span class="p">);</span>  <span class="c1">//ç”»å°åœˆåœˆ	</span>
    
    <span class="nx">quan</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">){</span>
    	<span class="nb">self</span><span class="p">.</span><span class="nx">drawSolidRound</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="nx">val</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span><span class="nx">val</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span><span class="nx">smallRound</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="7ç»˜åˆ¶çŸ©å½¢">7.ç»˜åˆ¶çŸ©å½¢</h1>

<blockquote>
  <p>æ–¹æ³•ï¼šdrawRect(cxt,x,y,width,height,BW,BC,fillColor)</p>
</blockquote>

<blockquote>
  <p>å‚æ•°ï¼š<code class="language-plaintext highlighter-rouge">cxt</code> <code class="language-plaintext highlighter-rouge">x</code> <code class="language-plaintext highlighter-rouge">y</code> <code class="language-plaintext highlighter-rouge">width</code> <code class="language-plaintext highlighter-rouge">height</code> <code class="language-plaintext highlighter-rouge">BW</code> <code class="language-plaintext highlighter-rouge">BC</code> <code class="language-plaintext highlighter-rouge">fillColor</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>ç±»å‹</th>
      <th>å¿…å¡«</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ctx</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>canvas 2dç»˜å›¾ç¯å¢ƒ</td>
    </tr>
    <tr>
      <td>x</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>èµ·å§‹åæ ‡x</td>
    </tr>
    <tr>
      <td>y</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>èµ·å§‹åæ ‡y</td>
    </tr>
    <tr>
      <td>width</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>çŸ©å½¢å®½åº¦</td>
    </tr>
    <tr>
      <td>height</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>çŸ©å½¢é«˜åº¦</td>
    </tr>
    <tr>
      <td>BW</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>è¾¹æ¡†çº¿æ¡å®½åº¦å€¼</td>
    </tr>
    <tr>
      <td>BW</td>
      <td>String</td>
      <td>æ˜¯</td>
      <td>è¾¹æ¡†çº¿æ¡é¢œè‰²å€¼</td>
    </tr>
    <tr>
      <td>fillColor</td>
      <td>String</td>
      <td>æ˜¯</td>
      <td>çŸ©å½¢å¡«å……è‰²</td>
    </tr>
  </tbody>
</table>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">drawRect</span><span class="p">(</span><span class="nx">cxt</span><span class="p">,</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">width</span><span class="p">,</span><span class="nx">height</span><span class="p">,</span><span class="nx">BW</span><span class="p">,</span><span class="nx">BC</span><span class="p">,</span><span class="nx">fillColor</span><span class="p">){</span>
    <span class="nx">cxt</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
    <span class="nx">cxt</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">);</span>
    <span class="nx">cxt</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">x</span><span class="o">+</span><span class="nx">width</span><span class="p">,</span><span class="nx">y</span><span class="p">);</span>
    <span class="nx">cxt</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">x</span><span class="o">+</span><span class="nx">width</span><span class="p">,</span><span class="nx">y</span><span class="o">+</span><span class="nx">height</span><span class="p">);</span>
    <span class="nx">cxt</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="o">+</span><span class="nx">height</span><span class="p">);</span>
    <span class="nx">cxt</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
    
    <span class="nx">cxt</span><span class="p">.</span><span class="nx">lineWidth</span><span class="o">=</span><span class="nx">BW</span><span class="p">;</span>
    <span class="nx">cxt</span><span class="p">.</span><span class="nx">fillStyle</span><span class="o">=</span><span class="nx">fillColor</span><span class="p">;</span>
    <span class="nx">cxt</span><span class="p">.</span><span class="nx">strokeStyle</span><span class="o">=</span><span class="nx">BC</span><span class="p">;</span>
    
    <span class="nx">cxt</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span>
    <span class="nx">cxt</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
<span class="p">}</span>	
</code></pre></div></div>

<h1 id="8ç»˜æ–‡å­—">8.ç»˜æ–‡å­—</h1>

<blockquote>
  <p>æ–¹æ³•ï¼šdrwaText(ctx,x,y,text)</p>
</blockquote>

<blockquote>
  <p>å‚æ•°ï¼š<code class="language-plaintext highlighter-rouge">ctx</code> <code class="language-plaintext highlighter-rouge">x</code> <code class="language-plaintext highlighter-rouge">y</code> <code class="language-plaintext highlighter-rouge">text</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>ç±»å‹</th>
      <th>å¿…å¡«</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ctx</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>canvas 2dç»˜å›¾ç¯å¢ƒ</td>
    </tr>
    <tr>
      <td>x</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ†å¿ƒxåæ ‡</td>
    </tr>
    <tr>
      <td>y</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ†å¿ƒyåæ ‡</td>
    </tr>
    <tr>
      <td>text</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>åŸºæœ¬å‚æ•°</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>å‚æ•°ï¼š<code class="language-plaintext highlighter-rouge">text</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>ç±»å‹</th>
      <th>å¿…å¡«</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>radius</td>
      <td>Number</td>
      <td>æ˜¯</td>
      <td>åœ¨å¤–åœ†æ–‡å­—</td>
    </tr>
    <tr>
      <td>font</td>
      <td>String</td>
      <td>æ˜¯</td>
      <td>å­—ä½“</td>
    </tr>
    <tr>
      <td>color</td>
      <td>String</td>
      <td>æ˜¯</td>
      <td>å­—ä½“é¢œè‰²</td>
    </tr>
    <tr>
      <td>noColor</td>
      <td>String</td>
      <td>æ˜¯</td>
      <td>æœªè¢«é€‰ä¸­å­—ä½“é¢œè‰²</td>
    </tr>
    <tr>
      <td>offsetPosition</td>
      <td>Object</td>
      <td>æ˜¯</td>
      <td>x:å‘â€™xâ€™è½´åç§»x,y:å‘â€™yâ€™è½´åç§»y</td>
    </tr>
  </tbody>
</table>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">drwaText</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">text</span><span class="p">){</span>	
    <span class="kd">let</span> <span class="nx">t</span> <span class="o">=</span> <span class="p">{</span>
    	<span class="na">x</span><span class="p">:</span><span class="nx">x</span><span class="p">,</span>
    	<span class="na">y</span><span class="p">:</span><span class="nx">y</span><span class="p">,</span>
    	<span class="na">r</span><span class="p">:</span><span class="nx">text</span><span class="p">.</span><span class="nx">radius</span>
    <span class="p">}</span>
    <span class="kd">let</span> <span class="nx">divide</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">allTagValues</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>  <span class="c1">//ç­‰åˆ†</span>
    <span class="kd">let</span> <span class="nx">angles</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">bbbb</span><span class="p">(</span><span class="nx">divide</span><span class="p">);</span>
    
    <span class="kd">let</span> <span class="nx">points</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getCircle</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">angles</span><span class="p">);</span>
    
    <span class="c1">//this.drawSmallCircle(ctx,2,points)</span>
    <span class="c1">//this.drawSolidRound(ctx,circle.x,circle.y,circle.r,0,360,{width:1,bgColor:'#000'});</span>
    
    <span class="kd">let</span> <span class="nx">tmpArr</span> <span class="o">=</span>  <span class="k">this</span><span class="p">.</span><span class="nx">dealTextData</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="nx">points</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">allTagValues</span><span class="p">,</span><span class="nx">text</span><span class="p">.</span><span class="nx">offsetPosition</span><span class="p">);</span> <span class="c1">//è·å–å¤„ç†å¥½çš„æ•°æ®</span>
    
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">font</span><span class="p">;</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
    
    <span class="nx">tmpArr</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">){</span>
    	<span class="nx">ctx</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="nx">val</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span> <span class="nx">val</span><span class="p">.</span><span class="nx">point</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">val</span><span class="p">.</span><span class="nx">point</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>	
    <span class="p">});</span>
	
<span class="p">}</span>
</code></pre></div></div>

<h1 id="9å·¥å…·æ–¹æ³•">9.å·¥å…·æ–¹æ³•</h1>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">//1.è§’åº¦è½¬å¼§åº¦</span>
<span class="nx">getRads</span> <span class="p">(</span><span class="nx">degrees</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="nx">degrees</span><span class="p">)</span> <span class="o">/</span> <span class="mi">180</span><span class="p">;</span> <span class="p">}</span> 

<span class="c1">//2.å¼§åº¦è½¬è§’åº¦</span>
<span class="nx">getDegrees</span> <span class="p">(</span><span class="nx">rads</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nx">rads</span> <span class="o">*</span> <span class="mi">180</span><span class="p">)</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">;</span> <span class="p">}</span>

<span class="c1">//3.è·å–è§’åº¦ç­‰åˆ†</span>
<span class="nx">getAngles</span><span class="p">(</span><span class="nx">num</span><span class="p">){</span>
	<span class="kd">let</span> <span class="nx">angle</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">/</span> <span class="nx">num</span><span class="p">;</span>
	<span class="kd">let</span> <span class="nx">tmpArr</span> <span class="o">=</span> <span class="p">[];</span>
	<span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;=</span><span class="nx">num</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
		<span class="nx">tmpArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">angle</span> <span class="o">*</span> <span class="nx">i</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">tmpArr</span><span class="p">;</span>
<span class="p">}</span>	
<span class="c1">//4.è·å–åœ†ä¸Šä»»æ„ä¸€ç‚¹åæ ‡</span>
<span class="nx">getCircle</span><span class="p">(</span><span class="nx">circle</span><span class="p">,</span><span class="nx">circleArr</span><span class="p">){</span>		
	<span class="kd">let</span> <span class="nx">tmpArr</span> <span class="o">=</span> <span class="p">[];</span>			
	<span class="nx">tmpArr</span> <span class="o">=</span> <span class="nx">circleArr</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">){</span>
		<span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>
		<span class="nx">obj</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">r</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">val</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">180</span><span class="p">);</span>
		<span class="nx">obj</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">r</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">val</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">180</span><span class="p">);</span>
		<span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
	<span class="p">});</span>
	<span class="k">return</span> <span class="nx">tmpArr</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//5.è·å–ç­‰åˆ†çº¿è§’åº¦</span>
<span class="nx">getsolidPointAngle</span><span class="p">(</span><span class="nx">num</span><span class="p">){</span>
	<span class="kd">let</span> <span class="nx">angle</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">/</span> <span class="nx">num</span><span class="p">;</span>
	<span class="kd">let</span> <span class="nx">tmpArr</span> <span class="o">=</span> <span class="p">[];</span>
	<span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">num</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
		<span class="nx">tmpArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">i</span> <span class="o">*</span> <span class="nx">angle</span> <span class="o">-</span> <span class="mi">90</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">tmpArr</span><span class="p">;</span>	
<span class="p">}</span>

<span class="c1">//6.éšä¾¿èµ·çš„åå­—</span>
<span class="nx">bbbb</span><span class="p">(</span><span class="nx">num</span><span class="p">){</span>
	<span class="kd">let</span> <span class="nx">angle</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">/</span> <span class="nx">num</span><span class="p">;</span>
	<span class="kd">let</span> <span class="nx">tmpArr</span> <span class="o">=</span> <span class="p">[];</span>
	<span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">num</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
		<span class="nx">tmpArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">angle</span> <span class="o">*</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">90</span> <span class="o">+</span> <span class="nx">angle</span><span class="o">/</span><span class="mi">2</span> <span class="p">);</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">tmpArr</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//7.åˆ¤è¯»æ•°ç»„æ˜¯å¦å­˜åœ¨æŸä¸ªå€¼</span>
<span class="nx">isArrayValue</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span><span class="nx">arr</span><span class="p">){</span>
  <span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
	  <span class="na">flag</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
	  <span class="na">ind</span><span class="p">:</span><span class="kc">null</span>
  <span class="p">}</span>		
  <span class="nx">arr</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">v</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">val</span> <span class="o">==</span> <span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">obj</span><span class="p">.</span><span class="nx">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
		<span class="nx">obj</span><span class="p">.</span><span class="nx">ind</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
	<span class="p">}</span>
  <span class="p">});</span>
  <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//8.å¤„ç†æ–‡å­—æ•°æ®,è¿”å›æ–‡å­—èµ·å§‹åæ ‡</span>
<span class="nx">dealTextData</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="nx">points</span><span class="p">,</span><span class="nx">textArr</span><span class="p">,</span><span class="nx">offsetPosition</span><span class="p">){</span>
	<span class="kd">let</span> <span class="nx">tmpArr</span> <span class="o">=</span> <span class="p">[];</span>
	<span class="nx">textArr</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span><span class="nx">ind</span><span class="p">){</span>
		<span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>
		<span class="kd">let</span> <span class="nx">textWidth</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">measureText</span><span class="p">(</span><span class="nx">val</span><span class="p">).</span><span class="nx">width</span><span class="p">;</span>  <span class="c1">//è·å–æ–‡æœ¬é•¿åº¦</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">ind</span> <span class="o">&lt;</span> <span class="nx">textArr</span><span class="p">.</span><span class="nx">length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">){</span>
			<span class="kd">let</span> <span class="nx">point</span> <span class="o">=</span> <span class="p">{</span>
					<span class="na">x</span><span class="p">:</span> <span class="nx">points</span><span class="p">[</span><span class="nx">ind</span><span class="p">].</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">offsetPosition</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
					<span class="na">y</span><span class="p">:</span> <span class="nx">points</span><span class="p">[</span><span class="nx">ind</span><span class="p">].</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">offsetPosition</span><span class="p">.</span><span class="nx">y</span>
				<span class="p">};</span>
			<span class="nx">obj</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span> 
			<span class="nx">obj</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
		<span class="p">}</span><span class="k">else</span><span class="p">{</span>
			<span class="kd">let</span> <span class="nx">point</span> <span class="o">=</span> <span class="p">{</span>
					<span class="na">x</span><span class="p">:</span> <span class="nx">points</span><span class="p">[</span><span class="nx">ind</span><span class="p">].</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">offsetPosition</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">textWidth</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span>
					<span class="na">y</span><span class="p">:</span> <span class="nx">points</span><span class="p">[</span><span class="nx">ind</span><span class="p">].</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">offsetPosition</span><span class="p">.</span><span class="nx">y</span>
				<span class="p">};</span>
			<span class="nx">obj</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span> 
			<span class="nx">obj</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="nx">tmpArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>		
	<span class="p">});</span>
	<span class="k">return</span> <span class="nx">tmpArr</span><span class="p">;</span>		
<span class="p">}</span>

</code></pre></div></div>

:ET