I"•@<p>éšç€å…¬å¸ä¸šåŠ¡è§„æ¨¡çš„æ‰©å¤§ï¼Œç®€å•çš„å¢åŠ æœåŠ¡å™¨é…ç½®å·²ç»æ»¡è¶³ä¸äº†å…¬å¸ä¸šåŠ¡éœ€æ±‚ã€‚è´Ÿè½½å‡è¡¡çš„ç›®çš„æ˜¯ä¸ºäº†è§£å†³å•ä¸ªèŠ‚ç‚¹å‹åŠ›è¿‡å¤§ï¼Œé€ æˆWebæœåŠ¡å“åº”è¿‡æ…¢ï¼Œä¸¥é‡çš„æƒ…å†µä¸‹å¯¼è‡´æœåŠ¡ç˜«ç—ªï¼Œæ— æ³•æ­£å¸¸æä¾›æœåŠ¡ã€‚</p>

<p>è´Ÿè½½å‡è¡¡æŒ‰ç…§èŒƒå›´å¯ä»¥åˆ†ä¸º<code class="language-plaintext highlighter-rouge">GSLB</code>(Global Server Load Balancer)å’Œ<code class="language-plaintext highlighter-rouge">SLB</code>(Server Load Balancer)ã€‚æŒ‰ç…§åè®®æ¨¡å‹åˆ†ä¸º<code class="language-plaintext highlighter-rouge">å››å±‚è´Ÿè½½å‡è¡¡</code>å’Œ<code class="language-plaintext highlighter-rouge">ä¸ƒå±‚è´Ÿè½½å‡è¡¡</code></p>

<p><img src="http://walidream.com:9999/blogImage/nginx/nginx_46.jpg" alt="ssl" /></p>

<h4 id="gslb">GSLB</h4>

<p>GSLBæ˜¯å¯¹ç‰©ç†é›†ç¾¤çš„è´Ÿè½½å‡è¡¡ã€‚GSLBæ˜¯ä¾èµ–äºç”¨æˆ·å’Œå®é™…éƒ¨ç½²ç¯å¢ƒçš„äº’è”ç½‘èµ„æºåˆ†å‘æŠ€æœ¯ï¼Œä¸åŒçš„ç›®çš„å¯¹åº”ç€ä¸€ç³»åˆ—ä¸åŒçš„æŠ€æœ¯å®ç°ã€‚</p>

<p><img src="http://walidream.com:9999/blogImage/nginx/nginx_47.jpg" alt="ssl" /></p>

<h4 id="slb">SLB</h4>

<p><img src="http://walidream.com:9999/blogImage/nginx/nginx_48.jpg" alt="ssl" /></p>

<h1 id="1nginxè´Ÿè½½å‡è¡¡åŸç†">1.nginxè´Ÿè½½å‡è¡¡åŸç†</h1>

<p>è´Ÿè½½å‡è¡¡å®ç°åŸç†æ˜¯é€šè¿‡nginx<code class="language-plaintext highlighter-rouge">proxy_pass</code>æ¨¡å—å’Œ<code class="language-plaintext highlighter-rouge">upstream</code>æ¨¡å—å®ç°çš„ã€‚å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œç”±nginxä»£ç†è½¬å‘upstreamæœåŠ¡æ± ï¼Œåœ¨ä¹‹å‰æ–‡ç« ä¸­ä»‹ç»ä½¿ç”¨è¿‡proxy_passï¼Œè´Ÿè½½
å‡è¡¡å’Œä¹‹å‰çš„ä»£ç†åŒºåˆ«å°±æ˜¯ï¼Œä¹‹å‰åªè½¬å‘ä¸€å°æœåŠ¡å™¨ã€‚è´Ÿè½½å‡è¡¡æ˜¯è½¬å‘å¤šå°æœåŠ¡å™¨ï¼Œå¹¶ä¸æ˜¯å®¢æˆ·ç«¯æ¯æ¬¡è¯·æ±‚éƒ½ä¼šè½¬å‘åˆ°å¤šå°æœºå™¨è€Œæ˜¯æ¯æ¬¡è¯·æ±‚åªè½¬å‘åˆ°ä¸€å°æœåŠ¡å™¨ã€‚</p>

<p><img src="http://walidream.com:9999/blogImage/nginx/nginx_49.jpg" alt="ssl" /></p>

<h1 id="2nginxé…ç½®æ¨¡å—">2.nginxé…ç½®æ¨¡å—</h1>

<h4 id="upstream">upstream</h4>

<p>upstreamé…ç½®é¡¹å±äº<code class="language-plaintext highlighter-rouge">ngx_http_upstream_module</code>æ¨¡å—<a href="http://nginx.org/en/docs/http/ngx_http_sub_module.html" title="http://nginx.org/en/docs/http/ngx_http_sub_module.html" target="_blank">ä¼ é€é—¨</a></p>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">Syntax:</span>	<span class="s">upstream</span> <span class="s">name</span> <span class="p">{</span> <span class="kn">...</span> <span class="err">}</span>
<span class="s">Default:</span> <span class="s">â€”</span>
<span class="s">Context:</span> <span class="s">http</span>
</code></pre></div></div>

<h4 id="server">server</h4>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">Syntax:</span>	<span class="s">server</span> <span class="s">address</span> <span class="s">[parameters]</span><span class="p">;</span>
<span class="k">Default:</span> <span class="s">â€”</span>
<span class="s">Context:</span> <span class="s">upstream</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>parameters</th>
      <th>å€¼ç±»å‹</th>
      <th>æè¿°</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>weight</td>
      <td>number</td>
      <td>è®¾ç½®æœåŠ¡å™¨çš„æƒé‡ï¼Œé»˜è®¤ä¸º1ã€‚æƒé‡è¶Šå¤§ï¼Œåˆ†é…å‡ ç‡è¶Šé«˜</td>
    </tr>
    <tr>
      <td>max_conns</td>
      <td>number</td>
      <td>é™åˆ¶ä¸ä»£ç†æœåŠ¡å™¨çš„æœ€å¤§å¹¶å‘æ´»åŠ¨è¿æ¥æ•°ã€‚é»˜è®¤å€¼ä¸ºé›¶ï¼Œè¡¨ç¤ºæ²¡æœ‰é™åˆ¶</td>
    </tr>
    <tr>
      <td>max_fails</td>
      <td>number</td>
      <td>è®¾ç½®åœ¨fail_timeoutå‚æ•°è®¾ç½®çš„æŒç»­æ—¶é—´å†…å‘ç”Ÿçš„ä¸æœåŠ¡å™¨é€šä¿¡çš„ä¸æˆåŠŸå°è¯•æ¬¡æ•°ï¼Œä»¥è€ƒè™‘æœåŠ¡å™¨åœ¨ä¸€æ®µæ—¶é—´å†…ä¸å¯ç”¨ï¼Œè¯¥æŒç»­æ—¶é—´ä¹Ÿç”±fail_timeoutå‚æ•°è®¾ç½®</td>
    </tr>
    <tr>
      <td>fail_timeout</td>
      <td>time</td>
      <td>å¥—æŒ‡å®šæ•°é‡çš„ä¸æˆåŠŸå°è¯•ä¸æœåŠ¡å™¨é€šä¿¡çš„æ—¶é—´åº”è¯¥è€ƒè™‘æœåŠ¡å™¨ä¸å¯ç”¨;ä»¥åŠæœåŠ¡å™¨è¢«è§†ä¸ºä¸å¯ç”¨çš„æ—¶é—´æ®µã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå‚æ•°è®¾ç½®ä¸º10ç§’ã€‚</td>
    </tr>
    <tr>
      <td>backup</td>
      <td>æ— </td>
      <td>å°†æœåŠ¡å™¨æ ‡è®°ä¸ºå¤‡ä»½æœåŠ¡å™¨ã€‚å½“ä¸»æœåŠ¡å™¨ä¸å¯ç”¨æ—¶ï¼Œå®ƒå°†è¢«ä¼ é€’è¯·æ±‚ã€‚</td>
    </tr>
    <tr>
      <td>down</td>
      <td>æ— </td>
      <td>å°†æœåŠ¡å™¨æ ‡è®°ä¸ºæ°¸ä¹…ä¸å¯ç”¨</td>
    </tr>
    <tr>
      <td>resolve</td>
      <td>ipåœ°å€</td>
      <td>ç›‘è§†ä¸æœåŠ¡å™¨åŸŸåå¯¹åº”çš„IPåœ°å€çš„æ›´æ”¹ï¼Œå¹¶è‡ªåŠ¨ä¿®æ”¹ä¸Šæ¸¸é…ç½®ï¼Œè€Œæ— éœ€é‡æ–°å¯åŠ¨nginxï¼ˆ1.5.12ï¼‰ã€‚æœåŠ¡å™¨ç»„å¿…é¡»é©»ç•™åœ¨å…±äº«å†…å­˜ä¸­ã€‚</td>
    </tr>
    <tr>
      <td>route</td>
      <td>string</td>
      <td>è®¾ç½®æœåŠ¡å™¨è·¯ç”±åç§°ã€‚</td>
    </tr>
    <tr>
      <td>service</td>
      <td>name</td>
      <td>èƒ½å¤Ÿè§£æDNS SRVè®°å½•å¹¶è®¾ç½®æœåŠ¡åç§°ï¼ˆ1.9.13ï¼‰ã€‚è¦ä½¿æ­¤å‚æ•°èµ·ä½œç”¨ï¼Œå¿…é¡»ä¸ºæœåŠ¡å™¨æŒ‡å®šresolveå‚æ•°å¹¶æŒ‡å®šä¸å¸¦ç«¯å£å·çš„ä¸»æœºåã€‚</td>
    </tr>
    <tr>
      <td>slow_start</td>
      <td>time</td>
      <td>è®¾ç½®æœåŠ¡å™¨å°†å…¶æƒé‡ä»é›¶æ¢å¤åˆ°æ ‡ç§°å€¼çš„æ—¶é—´ï¼Œå½“ä¸å¥åº·çš„æœåŠ¡å™¨å˜å¾—å¥åº·æ—¶ï¼Œæˆ–è€…æœåŠ¡å™¨åœ¨ä¸€æ®µæ—¶é—´è¢«è®¤ä¸ºä¸å¯ç”¨åå˜å¾—å¯ç”¨æ—¶ã€‚é»˜è®¤å€¼ä¸ºé›¶ï¼Œå³ç¦ç”¨æ…¢å¯åŠ¨ã€‚</td>
    </tr>
    <tr>
      <td>drain</td>
      <td>Â </td>
      <td>Â </td>
    </tr>
  </tbody>
</table>

<h1 id="3nginxé…ç½®">3.nginxé…ç½®</h1>

<p>å°èœè¿™é‡Œåˆšå¥½æœ‰ä¸¤å°æœåŠ¡å™¨ï¼Œ<code class="language-plaintext highlighter-rouge">walidream.com</code>å’Œ<code class="language-plaintext highlighter-rouge">yagn.xin</code>æœåŠ¡å™¨ã€‚walidream.comåšnginxä»£ç†è½¬å‘ï¼Œyagn.xinåšåå°æœåŠ¡å™¨å“åº”ã€‚</p>

<p>walidream.comæœåŠ¡å™¨</p>

<p>æœåŠ¡ç›®å½•</p>

<pre><code class="language-txt">/etc/nginx/conf.d
|-balancing.conf
</code></pre>

<h4 id="balancingconf">balancing.conf</h4>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">upstream</span> <span class="s">wali</span><span class="p">{</span>
    <span class="kn">server</span> <span class="nf">yagm.xin</span><span class="p">:</span><span class="mi">9001</span><span class="p">;</span>
    <span class="kn">server</span> <span class="nf">yagm.xin</span><span class="p">:</span><span class="mi">9002</span><span class="p">;</span>
    <span class="kn">server</span> <span class="nf">yagm.xin</span><span class="p">:</span><span class="mi">9003</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span>       <span class="mi">80</span><span class="p">;</span> 
    <span class="kn">server_name</span>  <span class="s">localhost</span><span class="p">;</span>

    <span class="c1">#charset koi8-r;</span>
    <span class="kn">access_log</span>  <span class="n">/var/log/nginx/proxy_test.log</span>  <span class="s">main</span><span class="p">;</span>

    <span class="kn">location</span> <span class="n">/</span> <span class="p">{</span> 
        <span class="kn">proxy_pass</span> <span class="s">http://wali</span><span class="p">;</span>
        <span class="kn">include</span> <span class="s">proxy_params</span><span class="p">;</span>
    <span class="p">}</span>   
<span class="p">}</span>
</code></pre></div></div>

<p>æ£€æµ‹è¯­æ³•å¹¶é‡å¯</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nginx -tc /etc/nginx/nginx.conf
nginx -s reload -c /etc/nginx/nginx.conf
</code></pre></div></div>

<p>yagn.xinæœåŠ¡å™¨</p>

<p>æœåŠ¡ç›®å½•</p>

<pre><code class="language-txt">/opt/app
|-code1
   |-index.html
|-code2
   |-index.html
|-code3
   |-index.html
   
/etc/nginx/conf.d
|-server1.conf
|-server2.conf
|-server3.conf
</code></pre>

<h4 id="indexhtmlcode1">index.html(code1)</h4>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;title&gt;</span>Document<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
	<span class="nt">&lt;h1&gt;</span>yagmæœåŠ¡å™¨<span class="nt">&lt;/h1&gt;</span>	
	<span class="nt">&lt;h1&gt;</span>ç¬¬ä¸€ä¸ªåº”ç”¨<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<h4 id="indexhtmlcode2">index.html(code2)</h4>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;title&gt;</span>Document<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
	<span class="nt">&lt;h1&gt;</span>yagmæœåŠ¡å™¨<span class="nt">&lt;/h1&gt;</span>	
	<span class="nt">&lt;h1&gt;</span>ç¬¬äºŒä¸ªåº”ç”¨<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<h4 id="indexhtmlcode3">index.html(code3)</h4>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;title&gt;</span>Document<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
	<span class="nt">&lt;h1&gt;</span>yagmæœåŠ¡å™¨<span class="nt">&lt;/h1&gt;</span>	
	<span class="nt">&lt;h1&gt;</span>ç¬¬ä¸‰ä¸ªåº”ç”¨<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<h4 id="server1conf">server1.conf</h4>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span>       <span class="mi">9001</span><span class="p">;</span>
    <span class="kn">server_name</span>  <span class="s">yagm.xin</span> <span class="s">www.yagm.xin</span><span class="p">;</span>

    <span class="c1">#charset koi8-r;</span>
    <span class="kn">access_log</span>  <span class="n">/var/log/nginx/server1.log</span>  <span class="s">main</span><span class="p">;</span>


    <span class="kn">location</span> <span class="n">/</span> <span class="p">{</span>
        <span class="kn">root</span>   <span class="n">/opt/app/code1</span><span class="p">;</span>
        <span class="kn">index</span>  <span class="s">index.html</span> <span class="s">index.htm</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="server2conf">server2.conf</h4>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span>       <span class="mi">9002</span><span class="p">;</span>
    <span class="kn">server_name</span>  <span class="s">yagm.xin</span> <span class="s">www.yagm.xin</span><span class="p">;</span>

    <span class="c1">#charset koi8-r;</span>
    <span class="kn">access_log</span>  <span class="n">/var/log/nginx/server2.log</span>  <span class="s">main</span><span class="p">;</span>


    <span class="kn">location</span> <span class="n">/</span> <span class="p">{</span>
        <span class="kn">root</span>   <span class="n">/opt/app/code2</span><span class="p">;</span>
        <span class="kn">index</span>  <span class="s">index.html</span> <span class="s">index.htm</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="server1conf-1">server1.conf</h4>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span>       <span class="mi">9003</span><span class="p">;</span>
    <span class="kn">server_name</span>  <span class="s">yagm.xin</span> <span class="s">www.yagm.xin</span><span class="p">;</span>

    <span class="c1">#charset koi8-r;</span>
    <span class="kn">access_log</span>  <span class="n">/var/log/nginx/server3.log</span>  <span class="s">main</span><span class="p">;</span>


    <span class="kn">location</span> <span class="n">/</span> <span class="p">{</span>
        <span class="kn">root</span>   <span class="n">/opt/app/code3</span><span class="p">;</span>
        <span class="kn">index</span>  <span class="s">index.html</span> <span class="s">index.htm</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>æ£€æµ‹è¯­æ³•å¹¶é‡å¯</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nginx -tc /etc/nginx/nginx.conf
nginx -s reload -c /etc/nginx/nginx.conf
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">æ³¨æ„ï¼šå¦‚æœè´­ä¹°çš„æ˜¯äº‘æœåŠ¡å™¨ï¼Œè®°å¾—è¦åœ¨å®‰åŒºç»„ä¸­å°†ä¸Šé¢9001,9002,9003ç«¯å£åœ¨å…¬ç½‘å¼€æ”¾ï¼Œä¸ç„¶å…¬ç½‘æ˜¯è®¿é—®ä¸äº†ã€‚</code>å¦‚æœä¸çŸ¥é“ï¼Œè¯·æŸ¥çœ‹è¿™ç¯‡æ–‡ç« <a href="/network/2018/05/20/node.html" title="/network/2018/05/20/node.html">ä¼ é€é—¨</a></p>

<p>å‡†å¤‡å¥½ä¹‹åï¼Œè®¿é—®<code class="language-plaintext highlighter-rouge">http://walidream.com</code>ï¼ŒæŒ‰F5åˆ·æ–°é¡µé¢ï¼Œä¼šå‘ç°åº”ç”¨åœ¨åˆ‡æ¢ã€‚</p>

<h1 id="4ip_hash">4.ip_hash</h1>

<p>æŒ‡å®šç»„åº”ä½¿ç”¨è´Ÿè½½å¹³è¡¡æ–¹æ³•ï¼Œå…¶ä¸­è¯·æ±‚æ ¹æ®å®¢æˆ·ç«¯IPåœ°å€åœ¨æœåŠ¡å™¨ä¹‹é—´åˆ†é…ã€‚å®¢æˆ·ç«¯IPv4åœ°å€çš„å‰ä¸‰ä¸ªå…«ä½å­—èŠ‚æˆ–æ•´ä¸ªIPv6åœ°å€ç”¨ä½œæ•£åˆ—å¯†é’¥ã€‚è¯¥æ–¹æ³•ç¡®ä¿æ¥è‡ªåŒä¸€å®¢æˆ·ç«¯çš„è¯·æ±‚å°†å§‹ç»ˆä¼ é€’åˆ°åŒä¸€æœåŠ¡å™¨ï¼Œé™¤éæ­¤æœåŠ¡å™¨ä¸å¯ç”¨ã€‚åœ¨åä¸€ç§æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯è¯·æ±‚å°†è¢«ä¼ é€’åˆ°å¦ä¸€ä¸ªæœåŠ¡å™¨ã€‚æœ€æœ‰å¯èƒ½çš„æ˜¯ï¼Œå®ƒä¹Ÿå°†å§‹ç»ˆæ˜¯åŒä¸€å°æœåŠ¡å™¨ã€‚</p>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">Syntax:</span>	<span class="s">ip_hash</span><span class="p">;</span>
<span class="k">Default:</span> <span class="s">â€”</span>
<span class="s">Context:</span> <span class="s">upstream</span>
</code></pre></div></div>

<h1 id="5hash">5.hash</h1>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">Syntax:</span>	<span class="s">hash</span> <span class="s">key</span> <span class="s">[consistent]</span><span class="p">;</span>
<span class="k">Default:</span> <span class="s">â€”</span>
<span class="s">Context:</span> <span class="s">upstream</span>
<span class="s">This</span> <span class="s">directive</span> <span class="s">appeared</span> <span class="s">in</span> <span class="s">version</span> <span class="mi">1</span><span class="s">.7.2.</span>
</code></pre></div></div>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">upstream</span> <span class="s">wali</span><span class="p">{</span>
	<span class="kn">hash</span> <span class="nv">$request_uri</span><span class="p">;</span>   <span class="c1">#å½“æ¯æ¬¡è¯·æ±‚åŒä¸€å°æœåŠ¡å™¨æ—¶ï¼Œå°±ä¼šå®šä½åˆ°åŒä¸€å°æœåŠ¡å™¨ã€‚</span>
    <span class="kn">server</span> <span class="nf">yagm.xin</span><span class="p">:</span><span class="mi">9001</span><span class="p">;</span>
    <span class="kn">server</span> <span class="nf">yagm.xin</span><span class="p">:</span><span class="mi">9002</span><span class="p">;</span>
    <span class="kn">server</span> <span class="nf">yagm.xin</span><span class="p">:</span><span class="mi">9003</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

:ET