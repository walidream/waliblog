I"Œ{<p>æœ¬å°èŠ‚ä»‹ç»äº†é¸­å­æ¨¡å‹ã€æŠ½è±¡åŸºç±»ã€ç±»å˜é‡å’Œå®ä¾‹å˜é‡ã€pythonä¸­ç±»çš„ç»§æ‰¿é¡ºåºã€å¯¹è±¡çš„ç§æœ‰å±æ€§ã€å¯¹è±¡çš„è‡ªçœæœºåˆ¶ã€superå‡½æ•°ã€‚</p>

<h1 id="1é¸­å­ç±»å‹å’Œå¤šæ€">1.é¸­å­ç±»å‹å’Œå¤šæ€</h1>

<h4 id="é¸­å­ç±»å‹">é¸­å­ç±»å‹</h4>

<p>åœ¨ç»´åŸºç™¾ç§‘ä¸­è¿™æ ·æè¿°é¸­å­ç±»å‹,<code class="language-plaintext highlighter-rouge">å½“çœ‹åˆ°ä¸€åªé¸Ÿèµ°èµ·æ¥åƒé¸­å­ã€æ¸¸æ³³èµ·æ¥åƒé¸­å­ã€å«èµ·æ¥ä¹Ÿåƒé¸­å­ï¼Œé‚£ä¹ˆè¿™åªé¸Ÿå°±å¯ä»¥è¢«ç§°ä¸ºé¸­å­</code>ã€‚</p>

<p>åœ¨é¸­å­ç±»å‹ä¸­ï¼Œå…³æ³¨ç‚¹åœ¨äºå¯¹è±¡çš„è¡Œä¸ºï¼Œèƒ½åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯å…³æ³¨å¯¹è±¡æ‰€å±çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸ä½¿ç”¨é¸­å­ç±»å‹çš„è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªç±»å‹ä¸ºâ€é¸­å­â€çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å®ƒçš„â€èµ°â€å’Œâ€å«â€æ–¹æ³•ã€‚åœ¨ä½¿ç”¨é¸­å­ç±»å‹çš„è¯­è¨€ä¸­ï¼Œè¿™æ ·çš„ä¸€ä¸ªå‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªä»»æ„ç±»å‹çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å®ƒçš„â€èµ°â€å’Œâ€å«â€æ–¹æ³•ã€‚å¦‚æœè¿™äº›éœ€è¦è¢«è°ƒç”¨çš„æ–¹æ³•ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°†å¼•å‘ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ã€‚ä»»ä½•æ‹¥æœ‰è¿™æ ·çš„æ­£ç¡®çš„â€èµ°â€å’Œâ€å«â€æ–¹æ³•çš„å¯¹è±¡éƒ½å¯è¢«å‡½æ•°æ¥å—çš„è¿™ç§è¡Œä¸ºå¼•å‡ºäº†ä»¥ä¸Šè¡¨è¿°ï¼Œè¿™ç§å†³å®šç±»å‹çš„æ–¹å¼å› æ­¤å¾—åã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Duck</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">quack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"è¿™é¸­å­æ­£åœ¨å˜å˜å«"</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">feathers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"è¿™é¸­å­æ‹¥æœ‰ç™½è‰²å’Œç°è‰²çš„ç¾½æ¯›"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">quack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">"è¿™äººæ­£åœ¨æ¨¡ä»¿é¸­å­"</span>

    <span class="k">def</span> <span class="nf">feathers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">"è¿™äººåœ¨åœ°ä¸Šæ‹¿èµ·1æ ¹ç¾½æ¯›ç„¶åç»™å…¶ä»–äººçœ‹"</span>


<span class="k">def</span> <span class="nf">in_the_forest</span><span class="p">(</span><span class="n">duck</span><span class="p">):</span>
    <span class="n">duck</span><span class="p">.</span><span class="n">quack</span><span class="p">()</span>
    <span class="n">duck</span><span class="p">.</span><span class="n">feathers</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">game</span><span class="p">():</span>
    <span class="n">donald</span> <span class="o">=</span> <span class="n">Duck</span><span class="p">()</span>
    <span class="n">john</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
    <span class="n">in_the_forest</span><span class="p">(</span><span class="n">donald</span><span class="p">)</span>
    <span class="n">in_the_forest</span><span class="p">(</span><span class="n">john</span><span class="p">)</span>

<span class="n">game</span><span class="p">()</span>
</code></pre></div></div>
<p>å¯¹in_the_forestå‡½æ•°è€Œè¨€ï¼Œå¯¹è±¡æ˜¯ä¸€ä¸ªé¸­å­ã€‚johnå¯¹è±¡ä¸­ä¹Ÿæ‹¥æœ‰<code class="language-plaintext highlighter-rouge">quack</code>å’Œ<code class="language-plaintext highlighter-rouge">feathers</code>æ–¹æ³•ã€‚é¸­å­ç±»å‹å…³æ³¨çš„æ˜¯å¯¹è±¡çš„è¡Œä¸ºè€Œä¸æ˜¯å¯¹è±¡æ‰€å±çš„ç±»å‹ã€‚</p>

<h4 id="å¤šæ€">å¤šæ€</h4>

<p><strong>å¤šæ€</strong>æ˜¯åŒä¸€ä¸ªè¡Œä¸ºå…·æœ‰å¤šä¸ªä¸åŒè¡¨ç°å½¢å¼æˆ–å½¢æ€çš„èƒ½åŠ›ã€‚</p>

<p>ä¸»äººå®¶æœ‰ä¸€åªç‹—å’Œä¸€åªçŒ«ï¼Œä¸»äººå‘ä»–ä»¬å‘å‡ºå«æŒ‡ä»¤æ—¶ï¼Œå¦‚æœæ˜¯ä¸€åªç‹—ï¼Œå°±<code class="language-plaintext highlighter-rouge">æ±ªæ±ªå«</code>ï¼Œå¦‚æœæ˜¯ä¸€åªçŒ«å°±<code class="language-plaintext highlighter-rouge">å–µå–µå«</code>ã€‚</p>

<p>éå¤šæ€æ¼”ç¤º</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Dog</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">Cat</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">sound</span><span class="p">(</span><span class="n">animal</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">animal</span><span class="p">,</span> <span class="n">Dog</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"æ±ªæ±ª"</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">animal</span><span class="p">,</span> <span class="n">Cat</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"å–µå–µ"</span><span class="p">)</span>


<span class="n">d</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">()</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Cat</span><span class="p">()</span>

<span class="n">sound</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="n">sound</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

<span class="c1">#è¾“å‡º
</span><span class="o">&gt;&gt;&gt;</span> <span class="n">æ±ªæ±ª</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">å–µå–µ</span>
</code></pre></div></div>

<p>å¤šæ€ä»£ç </p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Dog</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">sound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"æ±ªæ±ª"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Cat</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">soundself</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"å–µå–µ"</span><span class="p">)</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">()</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Cat</span><span class="p">()</span>

<span class="n">d</span><span class="p">.</span><span class="n">sound</span><span class="p">()</span>
<span class="n">c</span><span class="p">.</span><span class="n">sound</span><span class="p">()</span>

<span class="c1">#è¾“å‡º
</span><span class="o">&gt;&gt;&gt;</span> <span class="n">æ±ªæ±ª</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">å–µå–µ</span>
</code></pre></div></div>
<p>æ— è®ºåˆ›å»ºç‹—çš„å¯¹è±¡æˆ–è€…çŒ«çš„å¯¹è±¡ï¼Œè°ƒç”¨soundæ–¹æ³•æ—¶ï¼Œéƒ½èƒ½å¤Ÿæ­£ç¡®çš„æ‰“å°ã€‚</p>

<h1 id="2æŠ½è±¡åŸºç±»">2.æŠ½è±¡åŸºç±»</h1>

<p>ABCï¼ŒAbstract Base Classï¼ˆæŠ½è±¡åŸºç±»ï¼‰ï¼Œä¸»è¦å®šä¹‰äº†åŸºæœ¬ç±»å’Œæœ€åŸºæœ¬çš„æŠ½è±¡æ–¹æ³•ï¼Œå¯ä»¥ä¸ºå­ç±»å®šä¹‰å…±æœ‰çš„APIï¼Œä¸éœ€è¦å…·ä½“å®ç°ã€‚ç›¸å½“äºæ˜¯Javaä¸­çš„æ¥å£æˆ–è€…æ˜¯æŠ½è±¡ç±»ã€‚æ‰€æœ‰ç»§æ‰¿æŠ½è±¡åŸºç±»éƒ½å¿…é¡»è¦†ç›–å…¶çˆ¶ç±»çš„æ–¹æ³•,æŠ½è±¡åŸºç±»æ— æ³•å®ä¾‹åŒ–ã€‚</p>

<p><a href="https://docs.python.org/zh-cn/3/library/abc.html" title="https://docs.python.org/zh-cn/3/library/abc.html">æŠ½è±¡åŸºç±»</a>
<a href="https://zhuanlan.zhihu.com/p/26417576" title="https://zhuanlan.zhihu.com/p/26417576">StoneBeginåšä¸» python-æŠ½è±¡åŸºç±»</a></p>

<p>æŠ½è±¡åŸºç±»åº”ç”¨ï¼š</p>
<ul>
  <li>åœ¨æŸäº›æƒ…å†µä¸‹åˆ¤å®šæŸä¸ªå¯¹è±¡çš„ç±»å‹ <a href="https://docs.python.org/zh-cn/3/library/collections.abc.html#module-collections.abc" title="https://docs.python.org/zh-cn/3/library/collections.abc.html#module-collections.abc">collections.abc</a></li>
  <li>å¼ºåˆ¶æŸä¸ªå­ç±»å¿…é¡»å®ç°æŸäº›æ–¹æ³•</li>
</ul>

<h4 id="1åˆ¤æ–­æŸä¸ªå¯¹è±¡çš„ç±»å‹">1.åˆ¤æ–­æŸä¸ªå¯¹è±¡çš„ç±»å‹</h4>

<p>å‡è®¾æˆ‘ä»¬éœ€è¦åˆ¤æ–­comå¯¹è±¡ä¸­æ˜¯å¦å«æœ‰<code class="language-plaintext highlighter-rouge">__len__æ–¹æ³•</code>ã€‚ä¸€ç§æ–¹å¼ç”¨<code class="language-plaintext highlighter-rouge">hasattr</code>ï¼Œå¦ä¸€ç§å¯ä»¥ç”¨æŠ½è±¡åŸºç±»</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Sized</span>


<span class="k">class</span> <span class="nc">Company</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">employee</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">employee</span> <span class="o">=</span> <span class="n">employee</span>

    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">employee</span><span class="p">)</span>


<span class="n">com</span> <span class="o">=</span> <span class="n">Company</span><span class="p">([</span><span class="s">'wali'</span><span class="p">,</span> <span class="s">'eve'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">com</span><span class="p">,</span> <span class="s">"__len__"</span><span class="p">))</span>

<span class="c1">#æŠ½è±¡åŸºç±»ï¼Œå»ºè®®ä½¿ç”¨è¿™ç§
</span><span class="k">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">com</span><span class="p">,</span> <span class="n">Sized</span><span class="p">))</span>  

</code></pre></div></div>
<h4 id="2å¼ºåˆ¶æŸä¸ªå­ç±»å®ç°æŸäº›æ–¹æ³•">2.å¼ºåˆ¶æŸä¸ªå­ç±»å®ç°æŸäº›æ–¹æ³•</h4>

<p>å‡è®¾éœ€è¦å®ç°ä¸€ä¸ªç¼“å­˜ï¼Œåœ¨å®šä¹‰ç¼“å­˜åŸºç±»æ—¶ï¼Œè¦æ±‚ç»§æ‰¿<code class="language-plaintext highlighter-rouge">CacheBase</code>åŸºç±»çš„å­ç±»å¿…é¡»å®ç°å…¶åŸºç±»<code class="language-plaintext highlighter-rouge">get</code>ã€<code class="language-plaintext highlighter-rouge">set</code>æ–¹æ³•ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">abc</span>


<span class="k">class</span> <span class="nc">CacheBase</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span> <span class="n">abc</span><span class="p">.</span><span class="n">ABCMeta</span><span class="p">):</span>
    <span class="o">@</span><span class="n">abc</span><span class="p">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="o">@</span><span class="n">abc</span><span class="p">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">RedisCache</span><span class="p">(</span><span class="n">CacheBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="n">rc</span> <span class="o">=</span> <span class="n">RedisCache</span><span class="p">()</span>

</code></pre></div></div>
<p>æ‰§è¡Œä¸Šé¢ä»£ç ï¼Œæ˜¯ä¸ä¼šæŠ›å¼‚å¸¸çš„ï¼Œå› ä¸ºå­ç±»<code class="language-plaintext highlighter-rouge">RedisCache</code>å®ç°å…¶åŸºç±»çš„getã€setæ–¹æ³•ã€‚å¦‚æœ<code class="language-plaintext highlighter-rouge">RedisCache</code>ç±»ä¸­æœªå®ç°getã€setæ–¹æ³•ï¼Œåˆ™åœ¨åˆå§‹åŒ–æ—¶å°±ä¼šæŠ›å¼‚å¸¸ã€‚</p>

<h1 id="3ç±»å˜é‡å’Œå®ä¾‹å˜é‡">3.ç±»å˜é‡å’Œå®ä¾‹å˜é‡</h1>

<p><strong>ç±»å˜é‡</strong>å°±æ˜¯å®šä¹‰åœ¨ç±»ä¸­ï¼Œä½†æ˜¯åœ¨å‡½æ•°ä½“ä¹‹å¤–çš„å˜é‡ã€‚é€šå¸¸ä¸ä½¿ç”¨<code class="language-plaintext highlighter-rouge">self.å˜é‡å</code>èµ‹å€¼çš„å˜é‡ã€‚ç±»å˜é‡é€šå¸¸ä¸ä½œä¸ºç±»çš„å®ä¾‹å˜é‡ï¼Œç±»å˜é‡å¯¹æ‰€æœ‰å®ä¾‹åŒ–çš„å¯¹è±¡æ˜¯å…¬ç”¨çš„ã€‚</p>

<p><strong>å®ä¾‹å˜é‡</strong>å®šä¹‰åœ¨æ–¹æ³•ä¸­çš„å˜é‡ï¼Œä½¿ç”¨<code class="language-plaintext highlighter-rouge">self</code>ç»‘å®šåˆ°å®ä¾‹ä¸Šçš„å˜é‡ï¼Œåªå¯¹å®ä¾‹èµ·ä½œç”¨</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Circle</span><span class="p">:</span>
    <span class="c1">#ç±»å˜é‡
</span>    <span class="n">radius</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="c1">#å®ä¾‹å˜é‡
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

</code></pre></div></div>

<h4 id="è®¿é—®">è®¿é—®</h4>

<p><strong>è®¿é—®ç±»å˜é‡ï¼š</strong>åœ¨ç±»å†…éƒ¨è®¿é—®å¯ä»¥ä½¿ç”¨<code class="language-plaintext highlighter-rouge">className.ç±»å˜é‡</code>ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code class="language-plaintext highlighter-rouge">self.ç±»å˜é‡</code>è®¿é—®ï¼Œä½†ä¸å»ºè®®è¿™ä¹ˆè®¿é—®ã€‚åœ¨ç±»æ–¹æ³•ä¸­å¯ä»¥ä½¿ç”¨<code class="language-plaintext highlighter-rouge">cls.ç±»å˜é‡</code>å»ºè®®ä½¿ç”¨è¿™ç§ã€‚</p>

<p><strong>è®¿é—®å®ä¾‹å˜é‡ï¼š</strong>åœ¨ç±»çš„å†…éƒ¨å®ä¾‹æ–¹æ³•ä½¿ç”¨<code class="language-plaintext highlighter-rouge">self.å®ä¾‹å˜é‡</code>ï¼Œåœ¨ç±»çš„å¤–éƒ¨ä½¿ç”¨<code class="language-plaintext highlighter-rouge">å¯¹è±¡.å®ä¾‹å˜é‡</code>çš„å½¢å¼è®¿é—®ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Circle</span><span class="p">:</span>
    <span class="n">radius</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"ç±»åè®¿é—®ç±»å˜é‡ï¼š{}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">Circle</span><span class="p">.</span><span class="n">radius</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"selfè®¿é—®ç±»å˜é‡:{}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">radius</span><span class="p">))</span>


<span class="n">cir</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

<span class="c1"># è®¿é—®ç±»å˜é‡
</span><span class="k">print</span><span class="p">(</span><span class="s">"ç±»å¤–éƒ¨è®¿é—®ç±»å˜é‡ï¼š{}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">Circle</span><span class="p">.</span><span class="n">radius</span><span class="p">))</span>

<span class="c1"># è®¿é—®å®ä¾‹å˜é‡
</span><span class="k">print</span><span class="p">(</span><span class="s">"è®¿é—®xï¼š{}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">cir</span><span class="p">.</span><span class="n">x</span><span class="p">))</span>
</code></pre></div></div>

<h1 id="4pythonç»§æ‰¿é¡ºåº">4.pythonç»§æ‰¿é¡ºåº</h1>

<p>åœ¨ Python 3ä¸­å¤šç»§æ‰¿æ¨¡å¼æ˜¯ä½¿ç”¨<code class="language-plaintext highlighter-rouge">C3</code>ç®—æ³•æ¥ç¡®å®š MRO(Method Resolution Order) çš„ã€‚å…³äºMROå°ä¼™ä¼´ä»¬è¯·è‡ªè¡Œgoogleã€‚</p>

<p><img src="http://walidream.com:9999/blogImage/python/python_63.png" alt="ssl" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">D</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">D</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">D</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">print</span><span class="p">(</span><span class="n">A</span><span class="p">.</span><span class="n">__mro__</span><span class="p">)</span>

<span class="c1"># è¾“å‡º
</span><span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">__main__</span><span class="p">.</span><span class="n">A</span><span class="s">'&gt;, &lt;class '</span><span class="n">__main__</span><span class="p">.</span><span class="sa">B</span><span class="s">'&gt;, &lt;class '</span><span class="n">__main__</span><span class="p">.</span><span class="n">C</span><span class="s">'&gt;, &lt;class '</span><span class="n">__main__</span><span class="p">.</span><span class="n">D</span><span class="s">'&gt;, &lt;class '</span><span class="nb">object</span><span class="s">'&gt;)
</span></code></pre></div></div>

<p><img src="http://walidream.com:9999/blogImage/python/python_64.png" alt="ssl" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">D</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">E</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">E</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">D</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">print</span><span class="p">(</span><span class="n">A</span><span class="p">.</span><span class="n">__mro__</span><span class="p">)</span>

<span class="c1"># è¾“å‡º
</span><span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">__main__</span><span class="p">.</span><span class="n">A</span><span class="s">'&gt;, &lt;class '</span><span class="n">__main__</span><span class="p">.</span><span class="sa">B</span><span class="s">'&gt;, &lt;class '</span><span class="n">__main__</span><span class="p">.</span><span class="n">D</span><span class="s">'&gt;, &lt;class '</span><span class="n">__main__</span><span class="p">.</span><span class="n">C</span><span class="s">'&gt;, &lt;class '</span><span class="n">__main__</span><span class="p">.</span><span class="n">E</span><span class="s">'&gt;, &lt;class '</span><span class="nb">object</span><span class="s">'&gt;)
</span></code></pre></div></div>

<h1 id="5ç§æœ‰å±æ€§">5.ç§æœ‰å±æ€§</h1>

<p>pythonä¸­çš„<a href="https://waliblog.com/python/2019/06/29/python-15.html#11%E7%A7%81%E6%9C%89%E6%80%A7" title="https://waliblog.com/python/2019/06/29/python-15.html#11%E7%A7%81%E6%9C%89%E6%80%A7">ç§æœ‰å±æ€§</a>ï¼Œå°èœè¿™ç¯‡æ–‡ç« ä»‹ç»çš„æ¯”è¾ƒæ¸…æ¥šï¼Œè¿™é‡Œç®€å•çš„åšä¸ªè¡¥å……</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__name</span> <span class="o">=</span> <span class="n">name</span>
    
<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__name</span> <span class="o">=</span> <span class="n">name</span>

<span class="n">tom</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s">"Tom"</span><span class="p">)</span>
<span class="n">jerry</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="s">"Jerry"</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">tom</span><span class="p">.</span><span class="n">__dict__</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="s">'_Person__name'</span><span class="p">:</span> <span class="s">'Tom'</span><span class="p">}</span>

<span class="k">print</span><span class="p">(</span><span class="n">jerry</span><span class="p">.</span><span class="n">__dict__</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="s">'_Student__name'</span><span class="p">:</span> <span class="s">'Jerry'</span><span class="p">}</span>
</code></pre></div></div>

<p>å½“å®šä¹‰ä¸€ä¸ªç§æœ‰å˜é‡æ—¶ï¼Œpythonä¸­ä¼šå°†ç§æœ‰å˜é‡å˜å½¢ä¸º<code class="language-plaintext highlighter-rouge">_ç±»å__å˜é‡å</code>ã€‚ä¸Šé¢çœ‹åˆ°<code class="language-plaintext highlighter-rouge">_Person__name</code>ã€‚è¿™ç§å˜å½¢åçš„å½¢å¼ä¹Ÿè§£å†³äº†ç±»ä¸­çš„ç»§æ‰¿åå˜é‡çš„å‘½åé—®é¢˜ã€‚</p>

<h1 id="6å¯¹è±¡çš„è‡ªçœæœºåˆ¶">6.å¯¹è±¡çš„è‡ªçœæœºåˆ¶</h1>

<p>è‡ªçœæ˜¯é€šè¿‡ä¸€å®šçš„æœºåˆ¶æŸ¥è¯¢åˆ°å¯¹è±¡çš„å†…éƒ¨ç»“æ„</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"user"</span>

<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">school_name</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">school_name</span> <span class="o">=</span> <span class="n">school_name</span>

<span class="n">user</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="s">"å¤§å­¦"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="n">__dict__</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="s">'school_name'</span><span class="p">:</span><span class="s">'å¤§å­¦'</span><span class="p">}</span>
    
<span class="k">print</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="n">name</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">å¤§å­¦</span>

<span class="k">print</span><span class="p">(</span><span class="n">Person</span><span class="p">.</span><span class="n">__dict__</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="s">'__module__'</span><span class="p">:</span> <span class="s">'__main__'</span><span class="p">,</span> <span class="s">'name'</span><span class="p">:</span> <span class="s">'user'</span><span class="p">,</span> <span class="s">'__dict__'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">attribute</span> <span class="s">'__dict__'</span> <span class="n">of</span> <span class="s">'Person'</span> <span class="n">objects</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">'__weakref__'</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">attribute</span> <span class="s">'__weakref__'</span> <span class="n">of</span> <span class="s">'Person'</span> <span class="n">objects</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">'__doc__'</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>

</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">user.__dict__</code>åªæ‰“å°school_nameå±æ€§ï¼Œå¯ä»¥è®¿é—®åˆ°nameå±æ€§ã€‚Personä¸­çš„nameä¸å±äºuserå¯¹è±¡ã€‚å½“è®¿é—®user.nameå±æ€§æ—¶ï¼Œuserä¸­nameä¸å­˜åœ¨æ—¶ï¼Œä¼šæ ¹æ®MROç®—æ³•ä¼šä¸ŠæŸ¥æ‰¾ï¼Œç„¶ååœ¨Personä¸­æŸ¥æ‰¾nameå±æ€§ã€‚</p>

<p>pythonä¸­<code class="language-plaintext highlighter-rouge">dir()</code>å‡½æ•°æ¯”<code class="language-plaintext highlighter-rouge">__dict__</code>åŠŸèƒ½æ›´ä¸ºå¼ºå¤§ï¼Œå®ƒèƒ½ä¾‹ä¸¾å‡ºæ‰€æœ‰çš„å±æ€§ã€‚</p>

<h1 id="7superå‡½æ•°">7.superå‡½æ•°</h1>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"çˆ¶ç±»"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"å­ç±»"</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init</span><span class="p">()</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">çˆ¶ç±»</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">å­ç±»</span>
</code></pre></div></div>

<p>æˆ‘ä»¬çŸ¥é“superæ˜¯è°ƒç”¨çˆ¶ç±»çš„ï¼Œè¿™ç§è¯´æ³•æœ‰ç‚¹ä¸ä¸¥è°¨ã€‚ä¸ºä»€ä¹ˆè¯´è¿™ç§è¯´æ³•ä¸å¤Ÿä¸¥è°¨å‘¢ï¼Ÿä¸Šé¢è¿™ä¸ªä¾‹å­superå°±æ˜¯è°ƒç”¨çš„äº†Aã€‚å¯¹äºå•ç»§æ‰¿æ¥è¯´æ²¡ä»€ä¹ˆæ¯›ç—…ï¼Œä½†æ˜¯å¯¹äºå¤šç»§æ‰¿å°±ä¸ä¸€å®šäº†ã€‚</p>

<p><img src="http://walidream.com:9999/blogImage/python/python_64.png" alt="ssl" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">D</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"D"</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">D</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"C"</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">D</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"B"</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"A"</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">()</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">A</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">B</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">C</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">D</span>
</code></pre></div></div>

<p>ä¸Šé¢è¿™ä¸ªä¾‹å­å°±è¯´æ˜ï¼Œå¦‚æœBè°ƒç”¨çˆ¶ç±»åº”è¯¥æ‰“å°çš„D,è€Œä¸æ˜¯Cã€‚æœ€åçš„é¡ºåºåº”è¯¥æ˜¯A-&gt;B-D-Cã€‚ä½†æ˜¯çœŸå®æƒ…å†µæ‰“å°çš„æ˜¯A-&gt;B-&gt;C-Dã€‚è¿™ä¹Ÿè¯´æ˜äº†superæ˜¯è°ƒç”¨MROé¡ºåºçš„ä¸‹ä¸€ä¸ªç±»çš„å‡½æ•°ã€‚</p>

:ET