---
layout: post
title: python 魔法函数 #标题
tagline: python中的魔法函数
category: python      #分类
author: wali    #作者
tag: Scrapy     #标签
ghurl:        #github url
ghurl_zip:   #github zip下载
comments: true

post_nav: ["1.魔法函数定义","2.魔法函数一览","3.len函数"]
group_tag: python3.7 进阶
---

本小节主要讲python中魔法函数，并用表格的方式列举出python中的魔法函数，供大家查找学习。最后还讲了len函数在python中是如何工作的。

# 1.魔法函数定义

魔法函数是python中的一种高级语法，允许你在类中自定义函数,自定义的函数格式为(__xxx__),并绑定到类的特殊方法中。

注意:魔法函数必须是python中提供的函数，自己定义的函数是没有用的。

```python
class Company:
    def __init__(self,employee_list):
        self.employee = empoloyee_list

    def __getitem__(self, item):
        return self.employee[item]

company = Company(['wali','eve'])
for em in company:
    print(em)

#输出
wali
eve
```

定义`Company`类，类是不能够迭代的，就是不能用for语句来进行遍历，当我们在company类中定义了`__getitem__`方法后，company类就可以迭代了，python解释器在内部帮我们完成了功能。

# 2.魔法函数一览

#### 非数学运算

作用|函数名称|
-|-|
字符串相关|\_\_repr\_\_、\_\_str\_\_|
集合、序列相关|\_\_len\_\_、\_\_getitem\_\_、\_\_setitem\_\_、\_\_delitem\_\_、\_\_contains\_\_|
迭代相关|\_\_iter\_\_、\_\_next\_\_|
可调用|\_\_call\_\_|
上下文管理|\_\_enter\_\_、\_\_exit\_\_|
数值转换|\_\_abs\_\_、\_\_bool\_\_、\_\_int\_\_、\_\_float\_\_、\_\_hash\_\_、\_\_index\_\_|
元类相关|\_\_new\_\_、\_\_init\_\_|
属性相关|\_\_getattr\_\_、\_\_setattr\_\_、\_\_getattribute\_\_、\_\_setattribute\_\_、\_\_dir\_\_|
属性描述符|\_\_get\_\_、\_\_set\_\_|
协程|\_\_await\_\_、\_\_aiter\_\_、\_\_anext\_\_、\_\_aenter\_\_、\_\_aexit\_\_|

#### 数学运算

作用|函数名称|
-|-|
一元运算符|\_\_neg\_\_(-)、\_\_pos\_\_(+)、\_\_abs\_\_|
二元运算符|\_\_lt\_\_(<)、\_\_le\_\_(<=)、\_\_eq\_\_(==)、\_\_ne\_\_(!=)、\_\_gt\_\_(>)、\_\_ge\_\_(>=)|
算术运算符|\_\_add\_\_(+)、\_\_sub\_\_(-)、\_\_mul\_\_(*)、\_\_truediv\_\_(/)、\_\_floordiv\_\_(//)、\_\_mod\_\_(%)、\_\_divmod\_\_、\_\_pow\_\_(**)、\_\_round\_\_|
反向算术运算符|\_\_radd\_\_、\_\_rsub\_\_、\_\_rmul\_\_、\_\_rtruediv\_\_、\_\_rfloordiv\_\_、\_\_rmod\_\_、\_\_rdivmod\_\_、\_\_rpow\_\_|
增量赋值算术运算符|\_\_iadd\_\_、\_\_isub\_\_、\_\_imul\_\_、\_\_itruediv\_\_、\_\_ifloordiv\_\_、\_\_ipow\_\_|
位运算符|\_\_invert\_\_(~)、\_\_lshift\_\_(<<)、\_\_rshift\_\_(>>)、\_\_and\_\_(&)、\_\_or\_\_(\|)、\_\_xor\_\_(^)|
反向位运算符|\_\_rishift\_\_、\_\_rrshift\_\_、\_\_rand\_\_、\_\_rxor\_\_、\_\_ror\_\_|
增量赋值位运算符|\_\_ilshift\_\_、\_\_irshift\_\_、\_\_iand\_\_、\_\_ixor\_\_、\_\_ior\_\_|

# 3.len函数

```python
class Person:
    def __init__(self,name):
        self.name = name

    def __len__(self):
        return len(self.name)

p = Person(['aaa','bbb'])

print(len(p))

>>> 2
```
当我们使用`len`方法时，python会隐含调用对象`__len__`方法，使用len获取`list`、`set`、`dict`、`tuple`等等Python内置类型的数据长度时，其实没有调用对象`__len__`方法，python的解释器是C语言来编写的，在内部维护一个数据长度的变量，为提升执行效率，直接获取内部数据的长度。




