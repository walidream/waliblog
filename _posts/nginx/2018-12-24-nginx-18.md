---
layout: post
title: nginx 搭建wordPress博客(18)  #标题
tagline: fastcgi 搭建wordPress博客
category: nginx      #分类
author: wali    #作者
tag: nginx     #标签
ghurl:        #github url
ghurl_zip:    #github zip下载
comments: true

post_nav: ["1.获取wordPress","2.创建数据库","3.nginx配置"]
group_tag: nginx教程
---

上一篇记录fastcgi反向代理设置，这篇继续上一篇的环境搭建wordPress博客，如果小伙伴没有配置环境，请参考上一篇博客先搭建环境。

- wordPress[官方安装教程](https://codex.wordpress.org/zh-cn:%E5%AE%89%E8%A3%85WordPress "https://codex.wordpress.org/zh-cn:%E5%AE%89%E8%A3%85WordPress"){:target="_blank"}

# 1.获取wordPress

打开[wordPress官方下载](https://wordpress.org/download/ "https://wordpress.org/download/"){:target="_blank"}，复制下载链接地址

![ssl]({{ site.url }}/assets/image/nginx/nginx_35.jpg)
	
	cd /opt/app/wdcode  #如果没有wdcode，则创建 mkdir wdcode
	
	wget https://wordpress.org/latest.tar.gz

	tar xzvf ./latest.tar.gz

	cd wordPress

# 2.创建数据库

如果没有安装mysql,请参考上一篇博客。

登录数据库

	mysql -uroot -p #密码为空，按回车
	
创建数据库

	create database wds;  #创建数据库
	
	show databases;       #查看创建的数据库
	
	#为wds数据库赋予所以权限，限定wds只能有localhost登录，密码为wds0k
	grant all privileges on wds.* to wds@'localhost' identified by 'wds0k';

登录wds数据，检测上面是否配置正确

	mysql -uwds -p'wds0k'


# 3.nginx配置

服务目录

```txt
/etc/nginx/conf.d
|--wordpress.conf
```
#### wordpress.conf

```nginx
server {
    listen       80; 
    server_name  localhost;

    #charset koi8-r;
    access_log  /var/log/nginx/host.access.log  main;
	
	root /opt/app/wdcode/wordpress;  #设置根路径
	
    location / { 
		#如果访问的不是/(根路径)，就/index.php?$args(参数)访问
        try_files $uri $uri/ /index.php?$args;  
        index  index.php;
    }   
    
    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }   
}    
```

#### 为wordpress文件添加权限

	cd /opt/app/wdcode 
	
	ll  #查看wordpress文件权限，会发现wdcode 的操作权限nobody
	
	chown -R nginx ./wordpress

在输入`ll`会发现wordpress文件的权限变为nginx

`注意：`

这个操作者不一定是`nginx`，小菜这么设置的，后面就报了一个没有权限写入的错误。

	vim /etc/opt/remi/php72/php-fpm.d/www.conf
	
	/user 
查看user的值是谁，然后在

![ssl]({{ site.url }}/assets/image/nginx/nginx_36.jpg)

	chown -R 'user的值' ./wordpress
	

检测配置重启nginx

	nginx -tc /etc/nginx/nginx.conf
	
	nginx -s reload -c /etc/nginx/nginx.conf

然后访问自己的域名http://walidream.com
	
![ssl]({{ site.url }}/assets/image/nginx/nginx_37.jpg)

![ssl]({{ site.url }}/assets/image/nginx/nginx_38.jpg)

这里需要注意的还是之前那个修改wordpress文件操作者，之后就没有什么问题，最后成功就是这个页面

![ssl]({{ site.url }}/assets/image/nginx/nginx_39.jpg)



























